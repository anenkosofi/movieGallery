{"mappings":"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","sources":["src/js-partials/movie-service.js"],"sourcesContent":["const API_KEY = 'bfcd7a06a5bb09fb5aafe756d2f60f73';\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nconst movieList = document.querySelector('.movie-list');\nconst paginationList = document.querySelector('.pagination-list');\nconst bodyRect = document.querySelector('body').getBoundingClientRect();\n\nfetchMovies()\n  .then(({ results }) => {\n    let pageNumber = 1;\n    renderMovieList(results);\n    makePagination(pageNumber);\n    makeButtonActive(pageNumber);\n\n    paginationList.addEventListener('click', onButtonClick);\n    const backwardButton = document.querySelector('.arrow-left');\n    const forwardButton = document.querySelector('.arrow-right');\n    backwardButton.addEventListener('click', onBackwardButtonClick);\n    forwardButton.addEventListener('click', onForwardButtonClick);\n    const movieLink = document.querySelector('.movie-link');\n  })\n  .catch(error => console.log(error));\n\nfunction onBackwardButtonClick() {\n  const buttons = document.querySelectorAll('.pagination-button');\n  [...buttons].map(button => {\n    if (button.classList.contains('active')) {\n      const currentPageNumber = Number(button.textContent);\n      const pageNumberToClick = currentPageNumber - 1;\n      fetchMovies(pageNumberToClick)\n        .then(({ results }) => {\n          renderMovieList(results);\n        })\n        .catch(error => console.log(error));\n      clearMarkup(paginationList);\n      makePagination(pageNumberToClick);\n      makeButtonActive(pageNumberToClick);\n    }\n  });\n}\n\nfunction onForwardButtonClick() {\n  const buttons = document.querySelectorAll('.pagination-button');\n  [...buttons].map(button => {\n    if (button.classList.contains('active')) {\n      const currentPageNumber = Number(button.textContent);\n      const pageNumberToClick = currentPageNumber + 1;\n      fetchMovies(pageNumberToClick)\n        .then(({ results }) => {\n          renderMovieList(results);\n        })\n        .catch(error => console.log(error));\n      clearMarkup(paginationList);\n      makePagination(pageNumberToClick);\n      makeButtonActive(pageNumberToClick);\n    }\n  });\n}\n\nasync function fetchMovies(page = 1) {\n  const response = await fetch(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}`\n  );\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n  return await response.json();\n}\n\nconst genres = {\n  12: 'Adventure',\n  14: 'Fantasy',\n  16: 'Animation',\n  18: 'Drama',\n  27: 'Horror',\n  28: 'Action',\n  35: 'Comedy',\n  36: 'History',\n  37: 'Western',\n  53: 'Thriller',\n  80: 'Crime',\n  99: 'Documentary',\n  878: 'Sci-Fi',\n  9648: 'Mystery',\n  10402: 'Music',\n  10749: 'Romance',\n  10751: 'Family',\n  10752: 'War',\n  10770: 'TV Movie',\n};\n\nfunction genresIdConverter(genreIds) {\n  return (genreIds = genreIds\n    .map(genreId => (genreId = genres[genreId]))\n    .slice(0, 3)\n    .join(', '));\n}\n\nfunction getFullYear(date) {\n  const year = new Date(date).getFullYear();\n\n  return year;\n}\n\nfunction roundAverageVote(vote) {\n  const roundedVote = vote.toFixed(1);\n  return roundedVote;\n}\n\nfunction renderMovieList(movies) {\n  const markup = movies\n    .map(\n      ({ poster_path, title, genre_ids, release_date, vote_average }) =>\n        `<li class=\"movie-list__item\">\n          <a class=\"movie-link\" href=\"\" data-modal-open>\n            <img class=\"movie-image\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" width=\"375\" />\n            <div class=\"movie-descr\">\n              <h2 class=\"movie-title\">${title}</h2>\n              <p class=\"movie-info\">${genresIdConverter(\n                genre_ids\n              )} | ${getFullYear(\n          release_date\n        )}<span class=\"vote-average\">${roundAverageVote(\n          vote_average\n        )}</span></p>\n            </div>\n          </a>\n        </li>`\n    )\n    .join('');\n  movieList.innerHTML = markup;\n}\n\nfunction buttonMarkup(array) {\n  const markup = array\n    .map(\n      pageNumber =>\n        `<li class=\"pagination-item\">\n          <button class=\"pagination-button\" type=\"button\">${pageNumber}</button>\n        </li>`\n    )\n    .join('');\n\n  return markup;\n}\n\nfunction makePagination(quantity) {\n  let buttonArray = [];\n  let paginationMarkup = '';\n  let numberOfButtons = 0;\n  const dots =\n    '<li class=\"pagination-item\"><button class=\"pagination-button\" type=\"button\">...</button></li>';\n  const firstButton =\n    '<li class=\"pagination-item\"><button class=\"pagination-button\" type=\"button\">1</button></li>';\n\n  const lastButton =\n    '<li class=\"pagination-item\"><button class=\"pagination-button\" type=\"button\">20</button></li>';\n\n  if (quantity >= 1 && quantity <= 3) {\n    numberOfButtons = 5;\n    for (let i = 1; i <= numberOfButtons; i += 1) {\n      buttonArray.push(i);\n    }\n    if (bodyRect.width < 768) {\n      const markup = buttonMarkup(buttonArray);\n      paginationMarkup = `${markup}`;\n    } else {\n      const markup = buttonMarkup(buttonArray);\n      paginationMarkup = `${markup} ${dots} ${lastButton}`;\n    }\n  } else if (quantity > 3 && quantity < 18) {\n    numberOfButtons = quantity + 2;\n    const startButton = quantity - 2;\n    for (let i = startButton; i <= numberOfButtons; i += 1) {\n      buttonArray.push(i);\n    }\n    if (bodyRect.width < 768) {\n      const markup = buttonMarkup(buttonArray);\n      paginationMarkup = `${markup}`;\n    } else {\n      const markup = buttonMarkup(buttonArray);\n      paginationMarkup = `${firstButton} ${dots} ${markup} ${dots} ${lastButton}`;\n    }\n  } else if (quantity >= 18) {\n    for (let i = 16; i <= 20; i += 1) {\n      buttonArray.push(i);\n    }\n    if (bodyRect.width < 768) {\n      const markup = buttonMarkup(buttonArray);\n      paginationMarkup = `${markup}`;\n    } else {\n      const markup = buttonMarkup(buttonArray);\n      paginationMarkup = `${firstButton} ${dots} ${markup}`;\n    }\n  }\n\n  paginationList.innerHTML = paginationMarkup;\n}\n\nfunction makeButtonActive(number) {\n  const buttons = document.querySelectorAll('.pagination-button');\n  [...buttons].map(button => {\n    if (button.classList.contains('active')) {\n      button.classList.remove('active');\n    }\n    if (button.textContent == number) {\n      button.classList.add('active');\n    }\n  });\n}\n\nfunction clearMarkup(container) {\n  container.innerHTML = '';\n}\n\nfunction onButtonClick(e) {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  if (e.target.textContent) {\n    const pageNumber = Number(e.target.textContent);\n    clearMarkup(movieList);\n    fetchMovies(pageNumber)\n      .then(({ results }) => {\n        renderMovieList(results);\n      })\n      .catch(error => console.log(error));\n    clearMarkup(paginationList);\n    makePagination(pageNumber);\n    makeButtonActive(pageNumber);\n  }\n}\n\nfunction renderMovieModal(movies) {\n  const markup = movies.map(\n    ({\n      genre_ids,\n      original_title,\n      overview,\n      popularity,\n      poster_path,\n      title,\n      vote_average,\n      vote_count,\n    }) =>\n      `<img src=\"${poster_path}\" alt=\"\" width=\"375\" />\n    <div class=\"movie-details\">\n      <h3 class=\"movie-heading\">${title}</h3>\n      <ul class=\"movie-list-info\">\n        <li class=\"movie-list-info__item\">\n          <p class=\"movie-testimonial\">Vote / Votes</p>\n          <p class=\"movie-mark\">\n            <span class=\"rating\">${vote_count}</span><span class=\"delimeter\">/</span\n            ><span class=\"quantity\">${vote_average}</span>\n          </p>\n        </li>\n        <li class=\"movie-list-info__item\">\n          <p class=\"movie-testimonial\">Popularity</p>\n          <p class=\"movie-mark\">${popularity}</p>\n        </li>\n        <li class=\"movie-list-info__item\">\n          <p class=\"movie-testimonial\">Original Title</p>\n          <p class=\"movie-mark movie-mark--original-title\">${original_title}</p>\n        </li>\n        <li class=\"movie-list-info__item\">\n          <p class=\"movie-testimonial\">Genre</p>\n          <p class=\"movie-mark\">Western</p>\n        </li>\n      </ul>\n      <p class=\"about\">About</p>\n      <p class=\"about-descr\">${overview}</p>\n      <div class=\"button-wrapper button-wrapper--modal\">\n        <button class=\"button modal-button\" type=\"button\">\n          Add to watched\n        </button>\n        <button\n          class=\"button queue modal-button modal-button-queue\"\n          type=\"button\"\n        >\n          Add to queue\n        </button>\n      </div>\n    </div>`\n  );\n}\n"],"names":["$903bde950ad783c1$var$movieList","document","querySelector","$903bde950ad783c1$var$paginationList","$903bde950ad783c1$var$bodyRect","getBoundingClientRect","$903bde950ad783c1$var$onBackwardButtonClick","querySelectorAll","map","button","classList","contains","pageNumberToClick","Number","textContent","$903bde950ad783c1$var$fetchMovies","then","results","$903bde950ad783c1$var$renderMovieList","catch","error","console","log","$903bde950ad783c1$var$clearMarkup","$903bde950ad783c1$var$makePagination","$903bde950ad783c1$var$makeButtonActive","$903bde950ad783c1$var$onForwardButtonClick","async","page","response","fetch","ok","Error","status","json","addEventListener","$903bde950ad783c1$var$onButtonClick","backwardButton","forwardButton","$903bde950ad783c1$var$genres","movies","markup","poster_path","title","genre_ids","release_date","vote_average","genreIds","genreId","slice","join","date","Date","getFullYear","vote","toFixed","innerHTML","$903bde950ad783c1$var$buttonMarkup","array","pageNumber","quantity","buttonArray","paginationMarkup","numberOfButtons","dots","firstButton","lastButton","i","push","width","number","remove","add","container","e","target","nodeName"],"version":3,"file":"index.beba9f7b.js.map"}