{"mappings":"AAAA,MAGMA,EAAYC,SAASC,cAAc,eACnCC,EAAiBF,SAASC,cAAc,oBAE9C,IAAIE,EAAa,EAYjBC,eAAeC,IACb,MAAMC,QAAiBC,MACrB,iGAA0DJ,KAE5D,IAAKG,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,QAE3B,aAAaJ,EAASK,M,CAjBxBN,IACGO,MAAK,EAACC,QAAEA,MAqHX,IAA0BC,EApHtBC,EAAgBF,GAkFpB,SAAwBG,GACtB,IAAIC,EAAc,GACdC,EAAmB,GACnBC,EAAkB,EACtB,MAAMC,EACJ,gGAEF,GAAiB,IAAbJ,EAAgB,CAClBG,EAAkB,EAClB,IAAK,IAAIE,EAAIL,EAAUK,GAAKF,EAAiBE,GAAK,EAChDJ,EAAYK,KAAKD,GAGnBH,EAAmB,GADJK,EAAaN,MACIG,G,CAElC,GAAIJ,EAAW,GAAKA,EAAW,GAAI,CACjCG,EAAkBH,EAAW,EAC7B,IAAK,IAAIK,EAAIL,EAAUK,GAAKF,EAAiBE,GAAK,EAChDJ,EAAYK,KAAKD,GAGnBH,EAAmB,GAAGE,KADPG,EAAaN,MACYG,G,CAE1C,GAAIJ,GAAY,GAAI,CAClB,IAAK,IAAIK,EAAIL,EAAUK,GAAK,GAAIA,GAAK,EACnCJ,EAAYK,KAAKD,GAGnBH,EAAmB,GAAGE,KADPG,EAAaN,I,CAGNf,EAAesB,kBACvBC,mBAAmB,WAAYP,E,CAhH7CQ,CAAevB,GAmHOW,EAlHLX,EAoHnB,IADgBH,SAAS2B,iBAAiB,uBAC7BC,KAAIC,IACXA,EAAOC,aAAehB,GACxBe,EAAOE,UAAUC,IAAI,SAAS,GAtHJ,IAE7BC,OAAMC,GAASC,QAAQC,IAAIF,KAE9BhC,EAAemC,iBAAiB,SAuHhC,SAAuBC,GACrB,GAA0B,WAAtBA,EAAEC,OAAOC,SACX,OAEEF,EAAEC,OAAOT,cACX3B,EAAamC,EAAEC,OAAOT,YACtBzB,IACGO,MAAK,EAACC,QAAEA,MACPE,EAAgBF,EAAQ,IAKzBoB,OAAMC,GAASC,QAAQC,IAAIF,K,IAxHlC,MAAMO,EAAS,CACb,GAAI,YACJ,GAAI,UACJ,GAAI,YACJ,GAAI,QACJ,GAAI,SACJ,GAAI,SACJ,GAAI,SACJ,GAAI,UACJ,GAAI,UACJ,GAAI,WACJ,GAAI,QACJ,GAAI,cACJ,IAAK,kBACL,KAAM,UACN,MAAO,QACP,MAAO,UACP,MAAO,SACP,MAAO,MACP,MAAO,YAcT,SAAS1B,EAAgB2B,GACvB,MAAMC,EAASD,EACZd,KACC,EAACgB,YAAEA,EAAWC,MAAEA,EAAKC,UAAEA,EAASC,aAAEA,MAChC,2KAEmEH,0GAEnCC,+CAnBbG,EAqBXF,EApBKE,EAChBpB,KAAIqB,GAAsBR,EAAOQ,KACjCC,MAAM,EAAG,GACTC,KAAK,WAGWC,EAeYL,EAdvBM,KAAO,IAAIC,KAAKF,GAAMG,uEADhC,IAAqBH,EAPMJ,CAyBb,IAETG,KAAK,IACRpD,EAAUyD,UAAYb,C,CAGxB,SAASpB,EAAakC,GACpB,OAAQd,OAASc,EACd7B,KACC8B,GACE,2FACoDA,8BAGvDP,KAAK,G","sources":["src/js-partials/movie-service.js"],"sourcesContent":["const API_KEY = 'bfcd7a06a5bb09fb5aafe756d2f60f73';\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nconst movieList = document.querySelector('.movie-list');\nconst paginationList = document.querySelector('.pagination-list');\n\nlet pageNumber = 1;\n\nfetchMovies()\n  .then(({ results }) => {\n    renderMovieList(results);\n    makePagination(pageNumber);\n    makeButtonActive(pageNumber);\n  })\n  .catch(error => console.log(error));\n\npaginationList.addEventListener('click', onButtonClick);\n\nasync function fetchMovies() {\n  const response = await fetch(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${pageNumber}`\n  );\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n  return await response.json();\n}\n\nconst genres = {\n  12: 'Adventure',\n  14: 'Fantasy',\n  16: 'Animation',\n  18: 'Drama',\n  27: 'Horror',\n  28: 'Action',\n  35: 'Comedy',\n  36: 'History',\n  37: 'Western',\n  53: 'Thriller',\n  80: 'Crime',\n  99: 'Documentary',\n  878: 'Science Fiction',\n  9648: 'Mystery',\n  10402: 'Music',\n  10749: 'Romance',\n  10751: 'Family',\n  10752: 'War',\n  10770: 'TV Movie',\n};\n\nfunction genresIdConverter(genreIds) {\n  return (genreIds = genreIds\n    .map(genreId => (genreId = genres[genreId]))\n    .slice(0, 2)\n    .join(', '));\n}\n\nfunction getFullYear(date) {\n  return (year = new Date(date).getFullYear());\n}\n\nfunction renderMovieList(movies) {\n  const markup = movies\n    .map(\n      ({ poster_path, title, genre_ids, release_date }) =>\n        `<li class=\"movie-list__item\">\n          <a class=\"movie-link\" href=\"\" data-modal-open>\n            <img class=\"movie-image\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" width=\"375\" />\n            <div class=\"movie-descr\">\n              <h2 class=\"movie-title\">${title}</h2>\n              <p class=\"movie-info\">${genresIdConverter(\n                genre_ids\n              )} | ${getFullYear(release_date)}</p>\n            </div>\n          </a>\n        </li>`\n    )\n    .join('');\n  movieList.innerHTML = markup;\n}\n\nfunction buttonMarkup(array) {\n  return (markup = array\n    .map(\n      pageNumber =>\n        `<li class=\"pagination-item\">\n          <button class=\"pagination-button\" type=\"button\">${pageNumber}</button>\n        </li>`\n    )\n    .join(''));\n}\n\nfunction makePagination(quantity) {\n  let buttonArray = [];\n  let paginationMarkup = '';\n  let numberOfButtons = 0;\n  const dots =\n    '<li class=\"pagination-item\"><button class=\"pagination-button\" type=\"button\">...</button></li>';\n\n  if (quantity === 1) {\n    numberOfButtons = 4;\n    for (let i = quantity; i <= numberOfButtons; i += 1) {\n      buttonArray.push(i);\n    }\n    const markup = buttonMarkup(buttonArray);\n    paginationMarkup = `${markup} ${dots}`;\n  }\n  if (quantity > 1 && quantity < 17) {\n    numberOfButtons = quantity + 3;\n    for (let i = quantity; i <= numberOfButtons; i += 1) {\n      buttonArray.push(i);\n    }\n    const markup = buttonMarkup(buttonArray);\n    paginationMarkup = `${dots} ${markup} ${dots}`;\n  }\n  if (quantity >= 17) {\n    for (let i = quantity; i <= 20; i += 1) {\n      buttonArray.push(i);\n    }\n    const markup = buttonMarkup(buttonArray);\n    paginationMarkup = `${dots} ${markup}`;\n  }\n  const leftArrowButton = paginationList.firstElementChild;\n  leftArrowButton.insertAdjacentHTML('afterend', paginationMarkup);\n}\n\nfunction makeButtonActive(number) {\n  const buttons = document.querySelectorAll('.pagination-button');\n  [...buttons].map(button => {\n    if (button.textContent == number) {\n      button.classList.add('active');\n    }\n  });\n}\n\nfunction onButtonClick(e) {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  if (e.target.textContent) {\n    pageNumber = e.target.textContent;\n    fetchMovies()\n      .then(({ results }) => {\n        renderMovieList(results);\n        // !Number.isNaN(Number(e.target.textContent));\n        // makePagination(pageNumber);\n        // makeButtonActive(pageNumber);\n      })\n      .catch(error => console.log(error));\n  }\n}\n"],"names":["$903bde950ad783c1$var$movieList","document","querySelector","$903bde950ad783c1$var$paginationList","$903bde950ad783c1$var$pageNumber","async","$903bde950ad783c1$var$fetchMovies","response","fetch","ok","Error","status","json","then","results","number","$903bde950ad783c1$var$renderMovieList","quantity","buttonArray","paginationMarkup","numberOfButtons","dots","i","push","$903bde950ad783c1$var$buttonMarkup","firstElementChild","insertAdjacentHTML","$903bde950ad783c1$var$makePagination","querySelectorAll","map","button","textContent","classList","add","catch","error","console","log","addEventListener","e","target","nodeName","$903bde950ad783c1$var$genres","movies","markup","poster_path","title","genre_ids","release_date","genreIds","genreId","slice","join","date","year","Date","getFullYear","innerHTML","array","pageNumber1"],"version":3,"file":"index.3a0aea30.js.map"}